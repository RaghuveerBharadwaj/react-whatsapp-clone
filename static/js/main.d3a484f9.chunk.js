(this["webpackJsonpreact-whatsapp-clone"]=this["webpackJsonpreact-whatsapp-clone"]||[]).push([[0],{30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},51:function(e,t,n){var r={"./locale":20,"./locale.js":20};function a(e){var t=c(e);return n(t)}function c(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=c,e.exports=a,a.id=51},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(21),l=n.n(c),s=(n(30),n(25)),o=n(3),i=n(5),u=n.n(i),d=n(22),m=n.n(d),g=(n(32),n(7)),h=(n(33),n(6)),f=n.n(h),j=n(23),b=n.n(j),p=n.p+"static/media/logo.949b4e0b.png";function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var x=r.createElement("g",null,r.createElement("g",null,r.createElement("g",null,r.createElement("path",{d:"M64,341.333C64,364.907,83.093,384,106.667,384h170.667C300.907,384,320,364.907,320,341.333v-256H64V341.333z",fill:"tomato"}),r.createElement("polygon",{points:"266.667,21.333 245.333,0 138.667,0 117.333,21.333 42.667,21.333 42.667,64 341.333,64 341.333,21.333",fill:"tomato"})))),w=r.createElement("g",null),y=r.createElement("g",null),E=r.createElement("g",null),S=r.createElement("g",null),N=r.createElement("g",null),C=r.createElement("g",null),I=r.createElement("g",null),k=r.createElement("g",null),D=r.createElement("g",null),_=r.createElement("g",null),M=r.createElement("g",null),B=r.createElement("g",null),P=r.createElement("g",null),F=r.createElement("g",null),J=r.createElement("g",null);function R(e,t){var n=e.title,a=e.titleId,c=O(e,["title","titleId"]);return r.createElement("svg",v({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 384 384",style:{enableBackground:"new 0 0 384 384"},xmlSpace:"preserve",width:15,height:15,ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,x,w,y,E,S,N,C,I,k,D,_,M,B,P,F,J)}var T=r.forwardRef(R);n.p;function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function H(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var L=r.createElement("path",{fill:"#4285f4",d:"m304.140625 82.472656-270.976563 270.996094c-1.363281 1.367188-2.347656 3.09375-2.816406 4.949219l-30.035156 120.554687c-.898438 3.628906.167969 7.488282 2.816406 10.136719 2.003906 2.003906 4.734375 3.113281 7.527344 3.113281.855469 0 1.730469-.105468 2.582031-.320312l120.554688-30.039063c1.878906-.46875 3.585937-1.449219 4.949219-2.8125l271-270.976562zm0 0"}),U=r.createElement("path",{fill:"#4285f4",d:"m476.875 45.523438-30.164062-30.164063c-20.160157-20.160156-55.296876-20.140625-75.433594 0l-36.949219 36.949219 105.597656 105.597656 36.949219-36.949219c10.070312-10.066406 15.617188-23.464843 15.617188-37.714843s-5.546876-27.648438-15.617188-37.71875zm0 0"});function K(e,t){var n=e.title,a=e.titleId,c=H(e,["title","titleId"]);return r.createElement("svg",z({height:15,viewBox:"0 0 492.49284 492",width:15,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,L,U)}var Y=r.forwardRef(K),V=(n.p,n(1)),A=function(e){var t=e.messages,n=e.setMessages,a=JSON.parse(localStorage.getItem("userData")),c=Object(r.useState)(""),l=Object(o.a)(c,2),s=l[0],i=l[1],u=Object(r.useState)({}),d=Object(o.a)(u,2),m=d[0],h=d[1];Object(r.useEffect)((function(){setTimeout((function(){var e=document.getElementById("chat_body");e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}),300),f.a.get("".concat("http://localhost:5000","/messages/sync")).then((function(e){return n(e.data)})).catch((function(e){return console.error(e)}))}),[]);return Object(V.jsxs)("div",{className:"chat",children:[(null===m||void 0===m?void 0:m.id)&&Object(V.jsx)("div",{className:"mask",children:Object(V.jsx)("div",{className:"edit register",children:Object(V.jsx)("textarea",{rows:3,autoFocus:!0,name:"register",onChange:function(e){"\n"!==e.target.value&&h(Object(g.a)(Object(g.a)({},m),{},{message:e.target.value}))},value:(null===m||void 0===m?void 0:m.message)||"",onKeyUp:function(e){var t=e.keyCode||e.which;e.target.value&&13===t&&f.a.patch("".concat("http://localhost:5000","/messages/edit"),{id:m.id,message:m.message}).then((function(e){return h({})})).catch((function(e){return console.error(e)}))}})})}),Object(V.jsxs)("div",{className:"header",children:[Object(V.jsx)("img",{src:p,alt:"Raghuveer Bharadwaj"})," Raghuveer's Chat Room"]}),Object(V.jsx)("div",{className:"chat_body",id:"chat_body",children:t.map((function(e){return Object(V.jsxs)("div",{id:e._id,className:"message_body ".concat((null===a||void 0===a?void 0:a.userId)===e.userId&&"sent"),children:[Object(V.jsxs)("svg",{className:"arrow",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 13",width:"8",height:"13",children:[Object(V.jsx)("path",{opacity:".13",fill:"#0000000",d:"M1.533 3.568L8 12.193V1H2.812C1.042 1 .474 2.156 1.533 3.568z"}),Object(V.jsx)("path",{fill:"currentColor",d:"M1.533 2.568L8 11.193V0H2.812C1.042 0 .474 1.156 1.533 2.568z"})]}),Object(V.jsxs)("div",{className:"flex-user",children:[Object(V.jsxs)("small",{className:"sender",children:[e.name," ",e.edited&&Object(V.jsx)("small",{children:" \xa0(edited)"})]}),(null===a||void 0===a?void 0:a.userId)===e.userId&&Object(V.jsxs)("big",{children:[Object(V.jsx)(T,{onClick:function(){return t=e._id,void f.a.delete("".concat("http://localhost:5000","/messages/delete/").concat(t)).catch((function(e){return console.error(e)}));var t}}),Object(V.jsx)(Y,{onClick:function(){return h({id:(t=e)._id,message:t.message});var t}})]})]}),Object(V.jsx)("p",{className:"message",children:e.message}),Object(V.jsx)("p",{className:"timestamp",children:b()(e.timeStamp).format("DD MMM YYYY, hh:mm A")})]},e._id)}))}),Object(V.jsx)("div",{className:"footer",children:Object(V.jsx)("textarea",{rows:1,placeholder:"Enter your message here",onChange:function(e){return i(e.target.value)},value:s,onKeyUp:function(e){13===(e.keyCode||e.which)&&(f.a.post("".concat("http://localhost:5000","/messages/new"),Object(g.a)(Object(g.a)({},a),{},{timeStamp:new Date,message:s})).catch((function(e){return console.error(e)})),i(""))}})})]})},W=n(24),X=n.n(W),q=(n(53),function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(V.jsxs)("div",{className:"register",children:[Object(V.jsxs)("p",{children:["Welcome to the Chat Room! ",Object(V.jsx)("br",{}),Object(V.jsx)("small",{children:"Enter your Pen Name and press enter!!"})]}),Object(V.jsx)("input",{autoFocus:!0,name:"register",onChange:function(e){return a(e.target.value)},value:n,onKeyUp:function(e){var t=e.keyCode||e.which;if(n&&13===t){var r={name:n,userId:X()()};localStorage.setItem("userData",JSON.stringify(r)),window.location.reload()}}})]})});var G=function(){var e=Object(r.useState)({}),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),l=Object(o.a)(c,2),i=l[0],d=l[1];Object(r.useEffect)((function(){var e=localStorage.getItem("userData");e?a(JSON.parse(e)):localStorage.setItem("userData",JSON.stringify(n));var t=new m.a("e980e604cf9550c8c460",{cluster:"ap2"}).subscribe("messages");return t.bind("inserted",g),t.bind("deleted",h),t.bind("updated",f),function(){t.unbind()}}),[]);var g=function(e){d((function(t){return u.a.cloneDeep([].concat(Object(s.a)(u.a.cloneDeep(t)),[e]))}));var t=document.getElementById("chat_body");t&&t.scrollTo({top:t.scrollHeight,behavior:"smooth"})},h=function(e){return d((function(t){return u.a.cloneDeep(t).filter((function(t){return e!==t._id}))}))},f=function(e){d((function(t){return u.a.cloneDeep(t).map((function(t){return e.documentKey._id===t._id&&(t.message=e.updateDescription.updatedFields.message,t.edited=!0),t}))}))};return Object(V.jsx)("div",{className:"app",children:(null===n||void 0===n?void 0:n.userId)?Object(V.jsx)(A,{messages:i,setMessages:d}):Object(V.jsx)(q,{})})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,55)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,l=t.getTTFB;n(e),r(e),a(e),c(e),l(e)}))};l.a.render(Object(V.jsx)(a.a.StrictMode,{children:Object(V.jsx)(G,{})}),document.getElementById("root")),Q()}},[[54,1,2]]]);
//# sourceMappingURL=main.d3a484f9.chunk.js.map